# 🛠️ 관리자 페이지(Admin Dashboard) 구축 계획안

## 1. 개요 (Overview)
사이트 운영자가 콘텐츠를 효율적으로 관리하고, 사이트의 전반적인 설정(프로필, 테마 등)을 동적으로 변경할 수 있는 **전용 관리자 시스템**을 구축합니다. 보안을 위해 일반 사용자는 접근할 수 없으며, 인증된 관리자만 접속 가능합니다.

---

## 2. 핵심 기능 상세 (Key Features)

### 2.1 인증 및 보안 (Authentication & Security)
- **관리자 전용 로그인**: `/admin` 경로 접속 시 로그인 화면 표시.
- **Supabase Auth 연동**: 이메일/비밀번호 기반의 보안 로그인.
- **권한 관리 (RLS)**: 데이터베이스 레벨에서 `is_admin` 권한이 있는 사용자만 관리자 기능(삭제, 조회 등) 실행 가능.

### 2.2 대시보드 (Dashboard)
- **접속 현황**: 일일 방문자 수, 페이지뷰(PV) 그래프 (간단한 로그 저장소 구현).
- **활동 요약**: 오늘 작성된 방명록/게시글 수, 새 댓글 알림.
- **최신 시스템 상태**: DB 용량, 서버 상태(Supabase 상태) 확인.

### 2.3 콘텐츠 관리 (Content Management)
**A. 방명록 관리**
- **비밀글 열람**: '주인장만 보기'로 작성된 글의 내용 확인.
- **답글 달기**: 운영자 계정으로 답글 작성 (작성 시 강조 처리).
- **삭제/숨김**: 악성 글 즉시 삭제 또는 비공개 처리.
- **상단 고정**: 중요한 방명록 메시지를 최상단에 고정.

**B. 커뮤니티(자유게시판) 관리**
- **공지사항 등록**: 일반 글과 구분되는 공지사항 작성 및 상단 고정.
- **게시글 관리**: 부적절한 게시글 수정/삭제.
- **댓글 관리**: 악성 댓글 삭제.
- **검색 및 필터링**: 작성자 IP(또는 식별자), 내용 등으로 글 검색.

**C. 심야 카페 (채팅) 관리**
- **채팅 로그 조회**: 지난 채팅 기록 전체 조회.
- **강제 청소**: 채팅방 초기화 기능.

### 2.4 사이트 커스터마이징 (Site Customization)
- **운영자 프로필 설정**: 사이드바에 표시되는 운영자 이름, 상태 메시지, 프로필 이미지 변경 기능.
- **메인 배너 설정**: 커뮤니티 상단의 문구나 공지 텍스트 실시간 수정.
- **금지어 설정**: 방명록/채팅/게시판에 적용될 금지어 목록 관리.

### 2.5 사용자 제재 (User Moderation)
- **차단 관리**: 악성 사용자의 닉네임 또는 IP(접속 정보 기반) 차단하여 글 작성 방지.

---

## 3. 기술적 구현 계획 (Implementation Steps)

### Phase 1: 기반 시스템 구축 (Database & Auth)
1. **Admin 계정 생성**: Supabase Auth에 관리자 계정 생성.
2. **`admins` 테이블 생성**: 관리자 UID 관리.
3. **`site_settings` 테이블 생성**: 전역 설정(프로필, 공지 등) 저장용 Key-Value 저장소.
4. **Storage 버킷 설정**: 프로필 이미지 등 파일 업로드용.

### Phase 2: 프론트엔드 - 관리자 레이아웃
1. **Admin Layout**: 사이드바, 헤더가 포함된 관리자 전용 레이아웃 개발.
2. **Dashboard UI**: 차트 및 요약 카드 UI 구현.
3. **Login UI**: 관리자 로그인 폼 구현.

### Phase 3: 기능 구현
1. **콘텐츠 관리 페이지**: Grid 형태의 데이터 테이블 구현 (Paging, Filtering 포함).
2. **설정 페이지**: 폼(Form) 기반의 설정 변경 페이지 구현.
3. **이미지 업로드 기능**: 프로필 사진 변경을 위한 업로더 구현.

---

## 4. 데이터베이스 변경 사항 (DB Schema)

```sql
-- 사이트 전역 설정 테이블
create table site_settings (
  key text primary key, -- 예: 'admin_profile', 'site_notice'
  value jsonb not null, -- 설정 값 (이미지 URL, 텍스트 등)
  updated_at timestamptz default now()
);

-- 관리자 목록 (Auth와 연동)
create table admins (
  id uuid references auth.users(id) primary key,
  role text default 'super_admin'
);
```

## 5. 예상 일정 및 우선순위
1. **1순위**: 관리자 로그인 및 방명록/게시판 삭제 기능 (즉시적인 관리 필요).
2. **2순위**: '주인장만 보기' 글 열람 및 답글 기능.
3. **3순위**: 운영자 프로필 변경 등 커스터마이징 기능.
